function showHideBlock(e){e.preventDefault(),$(this).closest(".sh-block").toggleClass("sh-hidden")}function showHide(){$(document).on("click",".sh-btn, .show-text",showHideBlock),$(document).on("click",".cls-btn",showHideBlock)}function mainslider(){$(".mainslider").owlCarousel({loop:!0,items:1,autoplay:!1,mouseDrag:!1,nav:!0,dots:!1,navText:!1})}function usefullslider(){$(".usefullslider").owlCarousel({loop:!1,items:2,autoplay:!1,mouseDrag:!0,nav:!0,dots:!0,navText:!1,slideBy:2})}function showButt(){for(var e=$(".sh-block.sh-hidden p"),t=0;t<e.length;t++)132<e[t].offsetHeight&&$(e[t]).closest(".sh-block.sh-hidden").addClass("show-button")}function loadComments(){$(document).on("click",".comments .counter-item",function(e){var t=$(".comments-item",$(e.target).closest(".comments"));$.ajax({url:"./src/blocks/tests/test.html",cache:!1,type:"GET",success:function(e){$(t).append(e),showButt(),indexPage()}})})}function openSliderImage(){$(document).on("click",".open-img",function(e){e.preventDefault();var t=$(this).closest(".block"),n=t.find("div.active").find("img"),o=t.find(".popup");o.fadeIn().html($(n[0]).clone()).append('<div class="popup-close"></div>'),$(document).on("click",".popup-close",function(e){o.fadeOut()})})}function textCut(){$(document).find(".news-preview p").each(function(e,t){var n=t.innerText;if(!(98<n.length))return t;var o=n.substring(0,98)+"...";o.replace(/\s{2,}/g," "),t.innerText=o})}function mapsCustom(){ymaps.ready(function(){var e=new ymaps.Map("map",{center:[56.852071,53.213458],zoom:17},{searchControlProvider:"yandex#search"}),t=ymaps.templateLayoutFactory.createClass('<div style="color: #FFFFFF; font-weight: bold;">$[properties.iconContent]</div>');myPlacemarkWithContent=new ymaps.Placemark([56.852071,53.213458],{hintContent:"Лихвинцева, 46"},{iconLayout:"default#imageWithContent",iconImageHref:"./images/icon.png",iconContentLayout:t}),e.geoObjects.add(myPlacemarkWithContent)})}function closeDiv(){$(document).on("mouseup",function(e){var t=$(".veil"),n=$(".popup");n.is(e.target)||0!==n.has(e.target).length||(n.hide(),t.hide())})}function showPic(){$(document).on("click",".open-img",function(e){var t=$(".popup",$(e.target).closest(".item")),n=$(".img-prev",$(e.target).closest(".item")),o=$(".veil");o.show(),t.html($(n).clone()).fadeIn().append('<div class="popup-close"></div>'),$(document).on("click",".popup-close",function(e){t.fadeOut(),t.empty(),o.hide()}),closeDiv()})}function indexPage(){var n,e=$(".text-container p");e.length&&(e.each(function(){$clamp(this,{clamp:3})}),n=e,$(document).on("click",".sh-btn",function(e){if(n.closest(".sh-hidden"))for(var t=0;t<n.length;t++)$clamp($(n)[t],{clamp:"1000px"})}))}function sectionPage(){var e=$(".section-pubs .pub-container");e.length&&(e.each(function(){var e=$(".caption",$(this)),t=$(".annotation",$(this));checkClamp($(this)),92<e.height()||96<t.height()?$(this).addClass("sh-hidden hideable"):$(this).removeClass("sh-hidden hideable")}),e.on("click",".sh-btn",function(){checkClamp($(this).closest(".sh-block"))}))}$(document).ready(function(){showHide(),mainslider(),openSliderImage(),textCut(),mapsCustom(),usefullslider(),showButt(),loadComments(),indexPage(),showPic()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsic2hvd0hpZGVCbG9jayIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIiQiLCJ0aGlzIiwiY2xvc2VzdCIsInRvZ2dsZUNsYXNzIiwic2hvd0hpZGUiLCJkb2N1bWVudCIsIm9uIiwibWFpbnNsaWRlciIsIm93bENhcm91c2VsIiwibG9vcCIsIml0ZW1zIiwiYXV0b3BsYXkiLCJtb3VzZURyYWciLCJuYXYiLCJkb3RzIiwibmF2VGV4dCIsInVzZWZ1bGxzbGlkZXIiLCJzbGlkZUJ5Iiwic2hvd0J1dHQiLCJ0ZXh0IiwiaSIsImxlbmd0aCIsIm9mZnNldEhlaWdodCIsImFkZENsYXNzIiwibG9hZENvbW1lbnRzIiwiY29udGFpbmVyIiwidGFyZ2V0IiwiYWpheCIsInVybCIsImNhY2hlIiwidHlwZSIsInN1Y2Nlc3MiLCJodG1sIiwiYXBwZW5kIiwiaW5kZXhQYWdlIiwib3BlblNsaWRlckltYWdlIiwiYmxvY2siLCJhY3RpdmUiLCJmaW5kIiwicG9wdXAiLCJmYWRlSW4iLCJjbG9uZSIsImZhZGVPdXQiLCJ0ZXh0Q3V0IiwiZWFjaCIsIml0ZW0iLCJlbGVtZW50VGV4dCIsImlubmVyVGV4dCIsInJlc3VsdCIsInN1YnN0cmluZyIsInJlcGxhY2UiLCJtYXBzQ3VzdG9tIiwieW1hcHMiLCJyZWFkeSIsIm15TWFwIiwiTWFwIiwiY2VudGVyIiwiem9vbSIsInNlYXJjaENvbnRyb2xQcm92aWRlciIsIk15SWNvbkNvbnRlbnRMYXlvdXQiLCJ0ZW1wbGF0ZUxheW91dEZhY3RvcnkiLCJjcmVhdGVDbGFzcyIsIm15UGxhY2VtYXJrV2l0aENvbnRlbnQiLCJQbGFjZW1hcmsiLCJoaW50Q29udGVudCIsImljb25MYXlvdXQiLCJpY29uSW1hZ2VIcmVmIiwiaWNvbkNvbnRlbnRMYXlvdXQiLCJnZW9PYmplY3RzIiwiYWRkIiwiY2xvc2VEaXYiLCJkaXYiLCJpcyIsImhhcyIsImhpZGUiLCJzaG93UGljIiwiaW1nIiwic2hvdyIsImVtcHR5IiwiY2FwdGlvbnMiLCIkY2xhbXAiLCJjbGFtcCIsInNlY3Rpb25QYWdlIiwicHVicyIsImNhcHRpb24iLCJhbm5vdGF0aW9uIiwiY2hlY2tDbGFtcCIsImhlaWdodCIsInJlbW92ZUNsYXNzIl0sIm1hcHBpbmdzIjoiQUFhQSxTQUFTQSxjQUFjQyxHQUNyQkEsRUFBRUMsaUJBRVVDLEVBQUVDLE1BQU1DLFFBQVEsYUFDdEJDLFlBQVksYUFHcEIsU0FBU0MsV0FDUEosRUFBRUssVUFBVUMsR0FBRyxRQUFTLHNCQUF1QlQsZUFDL0NHLEVBQUVLLFVBQVVDLEdBQUcsUUFBUyxXQUFZVCxlQUd0QyxTQUFTVSxhQUNQUCxFQUFFLGVBQWVRLFlBQVksQ0FDM0JDLE1BQU0sRUFDTkMsTUFBTyxFQUNQQyxVQUFVLEVBQ1ZDLFdBQVcsRUFDWEMsS0FBSyxFQUNMQyxNQUFNLEVBQ05DLFNBQVMsSUFJYixTQUFTQyxnQkFDUGhCLEVBQUUsa0JBQWtCUSxZQUFZLENBQzlCQyxNQUFNLEVBQ05DLE1BQU8sRUFDUEMsVUFBVSxFQUNWQyxXQUFXLEVBQ1hDLEtBQUssRUFDTEMsTUFBTSxFQUNOQyxTQUFTLEVBQ1RFLFFBQVMsSUFJYixTQUFTQyxXQUlQLElBSEEsSUFDSUMsRUFBT25CLEVBQUUseUJBRUpvQixFQUFJLEVBQUdBLEVBQUlELEVBQUtFLE9BQVFELElBSGhCLElBSUVELEVBQUtDLEdBQUdFLGNBQ3ZCdEIsRUFBRW1CLEVBQUtDLElBQ0psQixRQUFRLHVCQUNScUIsU0FBUyxlQUtsQixTQUFTQyxlQUNQeEIsRUFBRUssVUFBVUMsR0FBRyxRQUFTLDBCQUEyQixTQUFTUixHQUMxRCxJQUFJMkIsRUFBWXpCLEVBQUUsaUJBQWtCQSxFQUFFRixFQUFFNEIsUUFBUXhCLFFBQVEsY0FDeERGLEVBQUUyQixLQUFLLENBQ0xDLElBQUssK0JBQ0xDLE9BQU8sRUFDUEMsS0FBTSxNQUNOQyxRQUFTLFNBQVNDLEdBQ2hCaEMsRUFBRXlCLEdBQVdRLE9BQU9ELEdBQ3BCZCxXQUNBZ0IsaUJBTVIsU0FBU0Msa0JBQ1BuQyxF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LEVBQUs3RSxHQUFHLFFBQVMsVUFBVyxXQUMxQmdGLFdBQVd0RixFQUFFQyxNQUFNQyxRQUFRLGlCQTdPakNGLEVBQUVLLFVBQVVnRCxNQUFNLFdBQ2hCakQsV0FDQUcsYUFDQTRCLGtCQUNBUSxVQUNBUSxhQUNBbkMsZ0JBQ0FFLFdBQ0FNLGVBQ0FVLFlBQ0F5QyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcbiAgc2hvd0hpZGUoKTtcclxuICBtYWluc2xpZGVyKCk7XHJcbiAgb3BlblNsaWRlckltYWdlKCk7XHJcbiAgdGV4dEN1dCgpO1xyXG4gIG1hcHNDdXN0b20oKTtcclxuICB1c2VmdWxsc2xpZGVyKCk7XHJcbiAgc2hvd0J1dHQoKTtcclxuICBsb2FkQ29tbWVudHMoKTtcclxuICBpbmRleFBhZ2UoKTtcclxuICBzaG93UGljKCk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gc2hvd0hpZGVCbG9jayhlKSB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICB2YXIgYmxvY2sgPSAkKHRoaXMpLmNsb3Nlc3QoXCIuc2gtYmxvY2tcIik7XHJcbiAgYmxvY2sudG9nZ2xlQ2xhc3MoXCJzaC1oaWRkZW5cIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNob3dIaWRlKCkge1xyXG4gICQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgXCIuc2gtYnRuLCAuc2hvdy10ZXh0XCIsIHNob3dIaWRlQmxvY2spO1xyXG4gICQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgXCIuY2xzLWJ0blwiLCBzaG93SGlkZUJsb2NrKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFpbnNsaWRlcigpIHtcclxuICAkKFwiLm1haW5zbGlkZXJcIikub3dsQ2Fyb3VzZWwoe1xyXG4gICAgbG9vcDogdHJ1ZSxcclxuICAgIGl0ZW1zOiAxLFxyXG4gICAgYXV0b3BsYXk6IGZhbHNlLFxyXG4gICAgbW91c2VEcmFnOiBmYWxzZSxcclxuICAgIG5hdjogdHJ1ZSxcclxuICAgIGRvdHM6IGZhbHNlLFxyXG4gICAgbmF2VGV4dDogZmFsc2VcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gdXNlZnVsbHNsaWRlcigpIHtcclxuICAkKFwiLnVzZWZ1bGxzbGlkZXJcIikub3dsQ2Fyb3VzZWwoe1xyXG4gICAgbG9vcDogZmFsc2UsXHJcbiAgICBpdGVtczogMixcclxuICAgIGF1dG9wbGF5OiBmYWxzZSxcclxuICAgIG1vdXNlRHJhZzogdHJ1ZSxcclxuICAgIG5hdjogdHJ1ZSxcclxuICAgIGRvdHM6IHRydWUsXHJcbiAgICBuYXZUZXh0OiBmYWxzZSxcclxuICAgIHNsaWRlQnk6IDJcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2hvd0J1dHQoKSB7XHJcbiAgdmFyIGhlaWdodFRleHQgPSAxMzI7XHJcbiAgdmFyIHRleHQgPSAkKFwiLnNoLWJsb2NrLnNoLWhpZGRlbiBwXCIpO1xyXG5cclxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRleHQubGVuZ3RoOyBpKyspIHtcclxuICAgIGlmIChoZWlnaHRUZXh0IDwgdGV4dFtpXS5vZmZzZXRIZWlnaHQpIHtcclxuICAgICAgJCh0ZXh0W2ldKVxyXG4gICAgICAgIC5jbG9zZXN0KFwiLnNoLWJsb2NrLnNoLWhpZGRlblwiKVxyXG4gICAgICAgIC5hZGRDbGFzcyhcInNob3ctYnV0dG9uXCIpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbG9hZENvbW1lbnRzKCkge1xyXG4gICQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgXCIuY29tbWVudHMgLmNvdW50ZXItaXRlbVwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICB2YXIgY29udGFpbmVyID0gJChcIi5jb21tZW50cy1pdGVtXCIsICQoZS50YXJnZXQpLmNsb3Nlc3QoXCIuY29tbWVudHNcIikpO1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgdXJsOiBcIi4vc3JjL2Jsb2Nrcy90ZXN0cy90ZXN0Lmh0bWxcIixcclxuICAgICAgY2FjaGU6IGZhbHNlLFxyXG4gICAgICB0eXBlOiBcIkdFVFwiLFxyXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihodG1sKSB7XHJcbiAgICAgICAgJChjb250YWluZXIpLmFwcGVuZChodG1sKTtcclxuICAgICAgICBzaG93QnV0dCgpOyAvL9C00L7QsdCw0LLQu9GP0LXQvCDQutC70LDRgdGBLCDQtdGB0LvQuCDQutC+0LzQvNC10L3RgtCw0YDQuNC5INC/0YDQtdCy0YvRiNCw0LXRgiDQtNC10YTQvtC70YLQvdGD0Y4g0LLRi9GB0L7RgtGDXHJcbiAgICAgICAgaW5kZXhQYWdlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuU2xpZGVySW1hZ2UoKSB7XHJcbiAgJChkb2N1bWVudCkub24oXCJjbGlja1wiLCBcIi5vcGVuLWltZ1wiLCBmdW5jdGlvbihlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgdmFyIGJsb2NrID0gJCh0aGlzKS5jbG9zZXN0KFwiLmJsb2NrXCIpO1xyXG4gICAgdmFyIGFjdGl2ZSA9IGJsb2NrLmZpbmQoXCJkaXYuYWN0aXZlXCIpLmZpbmQoXCJpbWdcIik7XHJcbiAgICB2YXIgcG9wdXAgPSBibG9jay5maW5kKFwiLnBvcHVwXCIpO1xyXG5cclxuICAgIHBvcHVwXHJcbiAgICAgIC5mYWRlSW4oKVxyXG4gICAgICAuaHRtbCgkKGFjdGl2ZVswXSkuY2xvbmUoKSlcclxuICAgICAgLmFwcGVuZCgnPGRpdiBjbGFzcz1cInBvcHVwLWNsb3NlXCI+PC9kaXY+Jyk7XHJcbiAgICBjbG9zZVBvcHVwKCk7XHJcblxyXG4gICAgZnVuY3Rpb24gY2xvc2VQb3B1cCgpIHtcclxuICAgICAgJChkb2N1bWVudCkub24oXCJjbGlja1wiLCBcIi5wb3B1cC1jbG9zZVwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgcG9wdXAuZmFkZU91dCgpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gdGV4dEN1dCgpIHtcclxuICB2YXIgdGV4dCA9ICQoZG9jdW1lbnQpLmZpbmQoXCIubmV3cy1wcmV2aWV3IHBcIik7XHJcbiAgdGV4dC5lYWNoKGZ1bmN0aW9uKGksIGl0ZW0pIHtcclxuICAgIHZhciBzaXplID0gOTg7XHJcbiAgICB2YXIgZWxlbWVudFRleHQgPSBpdGVtLmlubmVyVGV4dDtcclxuICAgIGlmIChlbGVtZW50VGV4dC5sZW5ndGggPiBzaXplKSB7XHJcbiAgICAgIHZhciByZXN1bHQgPSBlbGVtZW50VGV4dC5zdWJzdHJpbmcoMCwgc2l6ZSkgKyBcIi4uLlwiO1xyXG4gICAgICByZXN1bHQucmVwbGFjZSgvXFxzezIsfS9nLCBcIiBcIik7XHJcbiAgICAgIGl0ZW0uaW5uZXJUZXh0ID0gcmVzdWx0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1hcHNDdXN0b20oKSB7XHJcbiAgeW1hcHMucmVhZHkoZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbXlNYXAgPSBuZXcgeW1hcHMuTWFwKFxyXG4gICAgICAgIFwibWFwXCIsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY2VudGVyOiBbNTYuODUyMDcxLCA1My4yMTM0NThdLFxyXG4gICAgICAgICAgem9vbTogMTdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHNlYXJjaENvbnRyb2xQcm92aWRlcjogXCJ5YW5kZXgjc2VhcmNoXCJcclxuICAgICAgICB9XHJcbiAgICAgICksXHJcbiAgICAgIE15SWNvbkNvbnRlbnRMYXlvdXQgPSB5bWFwcy50ZW1wbGF0ZUxheW91dEZhY3RvcnkuY3JlYXRlQ2xhc3MoXHJcbiAgICAgICAgJzxkaXYgc3R5bGU9XCJjb2xvcjogI0ZGRkZGRjsgZm9udC13ZWlnaHQ6IGJvbGQ7XCI+JFtwcm9wZXJ0aWVzLmljb25Db250ZW50XTwvZGl2PidcclxuICAgICAgKTtcclxuICAgIG15UGxhY2VtYXJrV2l0aENvbnRlbnQgPSBuZXcgeW1hcHMuUGxhY2VtYXJrKFxyXG4gICAgICBbNTYuODUyMDcxLCA1My4yMTM0NThdLFxyXG4gICAgICB7XHJcbiAgICAgICAgaGludENvbnRlbnQ6IFwi0JvQuNGF0LLQuNC90YbQtdCy0LAsIDQ2XCJcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb25MYXlvdXQ6IFwiZGVmYXVsdCNpbWFnZVdpdGhDb250ZW50XCIsXHJcbiAgICAgICAgaWNvbkltYWdlSHJlZjogXCIuL2ltYWdlcy9pY29uLnBuZ1wiLFxyXG4gICAgICAgIC8vIGljb25JbWFnZVNpemU6IFs0OCwgNzBdLFxyXG4gICAgICAgIC8vIGljb25JbWFnZU9mZnNldDogWy0yNCwgLTY0XSxcclxuICAgICAgICAvLyBpY29uQ29udGVudE9mZnNldDogWzE1LCAxNV0sXHJcbiAgICAgICAgaWNvbkNvbnRlbnRMYXlvdXQ6IE15SWNvbkNvbnRlbnRMYXlvdXRcclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICBteU1hcC5nZW9PYmplY3RzLmFkZChteVBsYWNlbWFya1dpdGhDb250ZW50KTtcclxuICB9KTtcclxufVxyXG5cclxuLy/Qt9Cw0LrRgNC+0LXQvCDQv9C+0L/QsNC/INC/0L4g0LrQu9C40LrRgyDQstC90LUg0LXQs9C+XHJcbmZ1bmN0aW9uIGNsb3NlRGl2KCkge1xyXG4gICQoZG9jdW1lbnQpLm9uKFwibW91c2V1cFwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICB2YXIgcG9wdXAgPSAkKFwiLnZlaWxcIik7XHJcbiAgICB2YXIgZGl2ID0gJChcIi5wb3B1cFwiKTtcclxuICAgIGlmICghZGl2LmlzKGUudGFyZ2V0KSAmJiBkaXYuaGFzKGUudGFyZ2V0KS5sZW5ndGggPT09IDApIHtcclxuICAgICAgZGl2LmhpZGUoKTtcclxuICAgICAgcG9wdXAuaGlkZSgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93UGljKCkge1xyXG4gICQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgXCIub3Blbi1pbWdcIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgdmFyIGNvbnRhaW5lciA9ICQoXCIucG9wdXBcIiwgJChlLnRhcmdldCkuY2xvc2VzdChcIi5pdGVtXCIpKTtcclxuICAgIHZhciBpbWcgPSAkKFwiLmltZy1wcmV2XCIsICQoZS50YXJnZXQpLmNsb3Nlc3QoXCIuaXRlbVwiKSk7XHJcbiAgICB2YXIgcG9wdXAgPSAkKFwiLnZlaWxcIik7XHJcbiAgICBwb3B1cC5zaG93KCk7XHJcbiAgICBjb250YWluZXJcclxuICAgICAgLmh0bWwoJChpbWcpLmNsb25lKCkpXHJcbiAgICAgIC5mYWRlSW4oKVxyXG4gICAgICAuYXBwZW5kKCc8ZGl2IGNsYXNzPVwicG9wdXAtY2xvc2VcIj48L2Rpdj4nKTtcclxuXHJcbiAgICBjbG9zZVBvcHVwKCk7XHJcbiAgICBjbG9zZURpdigpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNsb3NlUG9wdXAoKSB7XHJcbiAgICAgICQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgXCIucG9wdXAtY2xvc2VcIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGNvbnRhaW5lci5mYWRlT3V0KCk7XHJcbiAgICAgICAgY29udGFpbmVyLmVtcHR5KCk7XHJcbiAgICAgICAgcG9wdXAuaGlkZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5kZXhQYWdlKCkge1xyXG4gIC8vINC+0LHRgNC10LfQsNGC0Ywg0L3QsNC30LLQsNC90LjQtSDRgNGD0LHRgNC40Log0L/QviDRiNC40YDQuNC90LVcclxuICB2YXIgY2FwdGlvbnMgPSAkKFwiLnRleHQtY29udGFpbmVyIHBcIik7XHJcbiAgaWYgKGNhcHRpb25zLmxlbmd0aCkge1xyXG4gICAgY2FwdGlvbnMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgJGNsYW1wKHRoaXMsIHsgY2xhbXA6IDMgfSk7XHJcbiAgICB9KTtcclxuICAgIGNoZWNrQ2xhbXAoY2FwdGlvbnMpO1xyXG4gIH1cclxuICBmdW5jdGlvbiBjaGVja0NsYW1wKGl0ZW0pIHtcclxuICAgICQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgXCIuc2gtYnRuXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgaWYgKGl0ZW0uY2xvc2VzdChcIi5zaC1oaWRkZW5cIikpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW0ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICRjbGFtcCgkKGl0ZW0pW2ldLCB7IGNsYW1wOiBcIjEwMDBweFwiIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG4vLyAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2hlYWRlciAubWVudSBhJywgZnVuY3Rpb24oZSl7XHJcbi8vICAgICB2YXIgaHJlZiA9ICQodGhpcykuYXR0cignaHJlZicpO1xyXG4vLyAgICAgaWYgKGhyZWYuaW5kZXhPZignLyMnKSA9PT0gMCkge1xyXG4vLyAgICAgICAgIHZhciBpZCA9IGhyZWYuc3Vic3RyaW5nKDIpLFxyXG4vLyAgICAgICAgICAgICBibG9jayA9ICQoJyMnK2lkKTtcclxuXHJcbi8vICAgICAgICAgaWYgKGJsb2NrLmxlbmd0aCkge1xyXG4vLyAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbi8vICAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuLy8gICAgICAgICAgICAgICAgICdzY3JvbGxUb3AnIDogYmxvY2sub2Zmc2V0KCkudG9wIC0gNDBcclxuLy8gICAgICAgICAgICAgfSk7XHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgfVxyXG4vLyB9KTtcclxuLy99XHJcblxyXG5mdW5jdGlvbiBzZWN0aW9uUGFnZSgpIHtcclxuICB2YXIgcHVicyA9ICQoXCIuc2VjdGlvbi1wdWJzIC5wdWItY29udGFpbmVyXCIpO1xyXG4gIGlmIChwdWJzLmxlbmd0aCkge1xyXG4gICAgcHVicy5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgY2FwdGlvbiA9ICQoXCIuY2FwdGlvblwiLCAkKHRoaXMpKSxcclxuICAgICAgICBhbm5vdGF0aW9uID0gJChcIi5hbm5vdGF0aW9uXCIsICQodGhpcykpO1xyXG4gICAgICBjaGVja0NsYW1wKCQodGhpcykpO1xyXG4gICAgICBpZiAoY2FwdGlvbi5oZWlnaHQoKSA+IDkyIHx8IGFubm90YXRpb24uaGVpZ2h0KCkgPiA5Nikge1xyXG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJzaC1oaWRkZW4gaGlkZWFibGVcIik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyhcInNoLWhpZGRlbiBoaWRlYWJsZVwiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgcHVicy5vbihcImNsaWNrXCIsIFwiLnNoLWJ0blwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgY2hlY2tDbGFtcCgkKHRoaXMpLmNsb3Nlc3QoXCIuc2gtYmxvY2tcIikpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBmdW5jdGlvbiBjaGVja0NsYW1wKGl0ZW0pIHtcclxuICAvLyAgIC8vINGN0YLQvtGCINGB0LrRgNC40L/RgiDRgdGA0LDQsdCw0YLRi9Cy0LDQtdGCINGA0LDQvdGM0YjQtSDRh9C10Lwg0YHRgtCw0L3QtNCw0YDRgtC90YvQuSDQtNC70Y8gc2gtYmxvY2ssINC/0L7RjdGC0L7QvNGDINGC0YPRgiDQvdC+0LHQvtGA0L7RgiDQv9GA0L7QstC10YDQutCwXHJcbiAgLy8gICBpZiAoaXRlbS5pcyhcIi5zaC1oaWRkZW5cIikpIHtcclxuICAvLyAgICAgJGNsYW1wKCQoXCIuY2FwdGlvblwiLCBpdGVtKVswXSwgeyBjbGFtcDogXCIxMDAwcHhcIiB9KTtcclxuICAvLyAgICAgJGNsYW1wKCQoXCIuYW5ub3RhdGlvblwiLCBpdGVtKVswXSwgeyBjbGFtcDogXCIxMDAwcHhcIiB9KTtcclxuICAvLyAgIH0gZWxzZSB7XHJcbiAgLy8gICAgICRjbGFtcCgkKFwiLmNhcHRpb25cIiwgaXRlbSlbMF0sIHsgY2xhbXA6IDMgfSk7XHJcbiAgLy8gICAgICRjbGFtcCgkKFwiLmFubm90YXRpb25cIiwgaXRlbSlbMF0sIHsgY2xhbXA6IDMgfSk7XHJcbiAgLy8gICB9XHJcbiAgLy8gfVxyXG59XHJcbiJdfQ==
